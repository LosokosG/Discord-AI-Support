---
import DashboardLayout from "../../../../layouts/DashboardLayout.astro";
import { ServerSettingsView } from "../../../../components/ServerSettingsView";
import BackLink from "../../../../components/dashboard/BackLink";

// Get the server ID from the URL
const { id } = Astro.params;

// We'll handle not having an ID in the React component
if (!id) {
  return Astro.redirect("/dashboard");
}

// You might want to check authentication here
// For example:
// const user = await getUserFromSession(Astro.cookies);
// if (!user) {
//   return Astro.redirect("/login?redirect=" + encodeURIComponent(Astro.url.pathname));
// }
---

<DashboardLayout title="Server Settings" activeTab="settings">
  <div class="container mx-auto py-6 px-4">
    <div class="mb-6">
      <BackLink href="/dashboard" />
      <h1 class="text-2xl font-bold mt-4">Server Settings</h1>
      <p class="text-muted-foreground">Configure your server settings</p>
    </div>

    <ServerSettingsView client:load serverId={id} />
  </div>
</DashboardLayout>
